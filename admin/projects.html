<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Projects Management</title>
  <style>
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background:#f3f5fb;
      color:#111827;
    }
    header{
      background:#111827;
      color:#fff;
      padding:14px 24px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    header h1{
      font-size:20px;
      margin:0;
    }
    nav a{
      color:#e5e7eb;
      margin-left:18px;
      text-decoration:none;
      font-size:14px;
    }
    nav a:hover{
      text-decoration:underline;
    }
    .container{
      padding:24px;
      max-width:900px;
      margin:0 auto;
    }
    .category-forms{
      display:flex;
      flex-wrap:wrap;
      gap:18px;
    }
    .category-block{
      flex:1 1 220px;
    }
    .category-block h3{
      margin-top:0;
      margin-bottom:8px;
      font-size:16px;
    }
    .card{
      background:#ffffff;
      border-radius:10px;
      padding:16px 18px;
      box-shadow:0 4px 10px rgba(15,23,42,0.06);
      margin-bottom:20px;
    }
    h2{
      margin-top:0;
      margin-bottom:12px;
      font-size:18px;
    }
    form.inline{
      display:flex;
      gap:8px;
      margin-top:8px;
    }
    input[type="text"]{
      flex:1;
      padding:8px;
      box-sizing:border-box;
    }
    button{
      padding:8px 12px;
      border:none;
      border-radius:6px;
      cursor:pointer;
      font-size:13px;
    }
    .btn-primary{
      background:#2563eb;
      color:#fff;
    }
    .btn-secondary{
      background:#e5e7eb;
      color:#111827;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:14px;
    }
    th, td{
      padding:8px 10px;
      border-bottom:1px solid #e5e7eb;
      text-align:left;
    }
    th{
      background:#f9fafb;
    }
    tbody tr:hover{
      background:#f3f4ff;
    }
  </style>
</head>
<body>
  <header>
    <h1>MakD Feedback â€” Projects</h1>
    <nav>
      <a href="dashboard.html">Dashboard</a>
      <a href="projects.html">Projects</a>
      <a href="#" id="logoutLink">Logout</a>
    </nav>
  </header>

  <div class="container">
    <div class="card">
      <h2>Hardware Projects</h2>
      <table>
        <thead>
          <tr>
            <th style="width:120px;">ID</th>
            <th>Name</th>
          </tr>
        </thead>
        <tbody id="hardwareBody">
        </tbody>
      </table>
      <div class="empty" id="hardwareEmpty" style="display:none;">No hardware projects defined in projects.json.</div>
    </div>

    <div class="card">
      <h2>Software Projects</h2>
      <table>
        <thead>
          <tr>
            <th style="width:120px;">ID</th>
            <th>Name</th>
          </tr>
        </thead>
        <tbody id="softwareBody">
        </tbody>
      </table>
      <div class="empty" id="softwareEmpty" style="display:none;">No software projects defined in projects.json.</div>
    </div>

    <div class="card">
      <h2>Poster Topics</h2>
      <table>
        <thead>
          <tr>
            <th style="width:120px;">ID</th>
            <th>Name</th>
          </tr>
        </thead>
        <tbody id="posterBody">
        </tbody>
      </table>
      <div class="empty" id="posterEmpty" style="display:none;">No poster topics defined in projects.json.</div>
    </div>
  </div>


  <script>
    (function(){
      // simple auth check
      if (localStorage.getItem("mst_admin_logged_in") !== "1"){
        window.location.href = "../azan.html";
        return;
      }

      document.getElementById("logoutLink").addEventListener("click", function(e){
        e.preventDefault();
        localStorage.removeItem("mst_admin_logged_in");
        window.location.href = "../azan.html";
      });

      const hardwareBody = document.getElementById("hardwareBody");
      const softwareBody = document.getElementById("softwareBody");
      const posterBody   = document.getElementById("posterBody");

      function renderCategory(list, tbody, emptyId){
        const emptyEl = document.getElementById(emptyId);
        tbody.innerHTML = "";
        if (!list || !list.length){
          const tr = document.createElement("tr");
          const td = document.createElement("td");
          td.colSpan = 2;
          td.textContent = "No projects yet.";
          tr.appendChild(td);
          tbody.appendChild(tr);
          if (emptyEl) emptyEl.style.display = "block";
          return;
        }
        if (emptyEl) emptyEl.style.display = "none";
        list.forEach(function(p){
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${p.id || ""}</td>
            <td>${p.name || ""}</td>
          `;
          tbody.appendChild(tr);
        });
      }

      fetch("../data/projects.json")
        .then(r => r.json())
        .then(function(data){
          const hardware = Array.isArray(data.hardware) ? data.hardware : [];
          const software = Array.isArray(data.software) ? data.software : [];
          const poster   = Array.isArray(data.poster)   ? data.poster   : [];
          renderCategory(hardware, hardwareBody, "hardwareEmpty");
          renderCategory(software, softwareBody, "softwareEmpty");
          renderCategory(poster,   posterBody,   "posterEmpty");
        })
        .catch(function(){
          renderCategory([], hardwareBody, "hardwareEmpty");
          renderCategory([], softwareBody, "softwareEmpty");
          renderCategory([], posterBody,   "posterEmpty");
        });
    })();
  </script>

</body>
</html>
